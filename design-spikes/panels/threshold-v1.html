<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HUD Threshold Panel Spike</title>
    <style>
      :root {
        --bg-0: #07070c;
        --bg-1: #0a0a0f;
        --surface-0: rgba(12, 12, 20, 0.9);
        --surface-1: rgba(17, 17, 28, 0.84);
        --surface-2: rgba(23, 23, 36, 0.85);
        --line: rgba(124, 108, 240, 0.34);
        --line-soft: rgba(124, 108, 240, 0.18);
        --text: #e8e8f4;
        --text-dim: #afafc8;
        --accent: #7c6cf0;
        --good: #4ade80;
        --warn: #fbbf24;
        --bad: #f87171;
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        min-height: 100vh;
        color: var(--text);
        font-family: "Sora", "Inter", "Segoe UI", sans-serif;
        background:
          radial-gradient(circle at 12% 10%, rgba(124, 108, 240, 0.26), transparent 36%),
          radial-gradient(circle at 88% 8%, rgba(124, 108, 240, 0.15), transparent 32%),
          linear-gradient(180deg, var(--bg-0), var(--bg-1) 62%);
        line-height: 1.45;
        padding: 24px;
      }

      .atmosphere {
        position: fixed;
        inset: 0;
        background:
          radial-gradient(circle at 24% 20%, rgba(124, 108, 240, 0.13), transparent 24%),
          radial-gradient(circle at 68% 16%, rgba(96, 123, 255, 0.09), transparent 26%);
        filter: blur(30px);
        pointer-events: none;
        z-index: -1;
        animation: drift 14s ease-in-out infinite alternate;
      }

      .shell {
        max-width: 1240px;
        margin: 0 auto;
        display: grid;
        gap: 14px;
      }

      .toolbar {
        border: 1px solid var(--line);
        border-radius: 14px;
        background: var(--surface-0);
        padding: 12px;
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
      }

      .toolbar button {
        border: 1px solid var(--line-soft);
        border-radius: 999px;
        background: rgba(124, 108, 240, 0.08);
        color: var(--text);
        font-size: 12px;
        padding: 7px 12px;
        cursor: pointer;
      }

      .toolbar button[aria-pressed="true"] {
        border-color: var(--accent);
        background: rgba(124, 108, 240, 0.22);
      }

      .visor {
        position: relative;
        min-height: min(88vh, 840px);
        border: 1px solid var(--line);
        border-radius: 22px;
        overflow: hidden;
        background:
          linear-gradient(145deg, rgba(12, 12, 20, 0.95), rgba(8, 8, 14, 0.92)),
          radial-gradient(circle at 84% 12%, rgba(124, 108, 240, 0.18), transparent 35%);
        box-shadow:
          0 28px 84px rgba(0, 0, 0, 0.5),
          0 0 90px rgba(124, 108, 240, 0.12);
      }

      .hud-bar {
        position: absolute;
        left: 14px;
        right: 14px;
        top: 14px;
        height: 44px;
        border: 1px solid var(--line-soft);
        border-radius: 999px;
        background: rgba(8, 8, 14, 0.72);
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 12px;
        font-size: 12px;
        color: var(--text-dim);
      }

      .hud-bar strong {
        color: var(--text);
      }

      .panel-main {
        position: absolute;
        left: 50%;
        top: 53%;
        transform: translate(-50%, -50%);
        width: min(760px, calc(100% - 132px));
        min-height: 500px;
        border: 1px solid var(--line);
        border-radius: 16px;
        background: linear-gradient(165deg, var(--surface-1), rgba(11, 11, 19, 0.9));
        box-shadow: 0 20px 62px rgba(0, 0, 0, 0.44);
        display: grid;
        grid-template-rows: auto auto auto 1fr auto auto;
        overflow: hidden;
      }

      .panel-header {
        border-bottom: 1px solid var(--line-soft);
        padding: 14px 16px;
      }

      .panel-label {
        font-size: 11px;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        color: var(--text-dim);
      }

      .panel-title {
        margin-top: 5px;
        font-size: 24px;
      }

      .panel-subtitle {
        margin-top: 6px;
        color: var(--text-dim);
        font-size: 13px;
      }

      .progress {
        display: grid;
        grid-template-columns: repeat(4, minmax(0, 1fr));
        gap: 6px;
        padding: 12px 16px;
        border-bottom: 1px solid var(--line-soft);
      }

      .progress span {
        border: 1px solid var(--line-soft);
        border-radius: 999px;
        font-size: 11px;
        text-align: center;
        padding: 4px 6px;
        color: var(--text-dim);
        background: rgba(124, 108, 240, 0.06);
      }

      .progress span.is-complete {
        border-color: rgba(74, 222, 128, 0.45);
        color: var(--text);
        background: rgba(74, 222, 128, 0.08);
      }

      .state-wrap {
        display: none;
        padding: 14px 16px;
      }

      body[data-state="default"] .state-default,
      body[data-state="loading"] .state-loading,
      body[data-state="empty"] .state-empty,
      body[data-state="error"] .state-error,
      body[data-state="auth-required"] .state-auth-required {
        display: block;
      }

      .state-card {
        border: 1px solid var(--line-soft);
        border-radius: 12px;
        background: rgba(10, 10, 16, 0.68);
        padding: 12px;
      }

      .state-card h3 {
        font-size: 13px;
        margin-bottom: 4px;
      }

      .state-card p {
        font-size: 13px;
        color: var(--text-dim);
      }

      .fields {
        padding: 0 16px 16px;
        display: grid;
        gap: 12px;
      }

      .field label,
      .field legend {
        display: block;
        font-size: 12px;
        color: var(--text-dim);
        margin-bottom: 6px;
      }

      input[type="text"],
      textarea {
        width: 100%;
        border: 1px solid var(--line-soft);
        border-radius: 10px;
        background: rgba(8, 8, 13, 0.88);
        color: var(--text);
        padding: 10px 12px;
        font-family: inherit;
        font-size: 13px;
      }

      textarea {
        min-height: 108px;
        resize: vertical;
      }

      .content-types {
        display: grid;
        grid-template-columns: repeat(4, minmax(0, 1fr));
        gap: 8px;
      }

      .type-pill {
        border: 1px solid var(--line-soft);
        border-radius: 10px;
        background: rgba(10, 10, 16, 0.64);
        padding: 8px;
        text-align: left;
        font-size: 12px;
        color: var(--text-dim);
        cursor: pointer;
      }

      .type-pill strong {
        display: block;
        color: var(--text);
        font-size: 12px;
      }

      .type-pill[aria-pressed="true"] {
        border-color: var(--accent);
        background: rgba(124, 108, 240, 0.2);
      }

      .mode-options {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 8px;
      }

      .mode-card {
        border: 1px solid var(--line-soft);
        border-radius: 10px;
        padding: 10px;
        background: rgba(10, 10, 16, 0.62);
        cursor: pointer;
      }

      .mode-card h4 {
        font-size: 13px;
      }

      .mode-card p {
        color: var(--text-dim);
        font-size: 12px;
        margin-top: 4px;
      }

      .mode-card.selected {
        border-color: var(--accent);
        background: rgba(124, 108, 240, 0.18);
      }

      .next, .summary {
        margin: 0 16px 12px;
        border: 1px dashed var(--line);
        border-radius: 10px;
        padding: 10px;
        background: rgba(10, 10, 16, 0.65);
      }

      .next p,
      .summary p {
        font-size: 12px;
        color: var(--text-dim);
      }

      .next strong,
      .summary strong {
        color: var(--text);
      }

      .actions {
        border-top: 1px solid var(--line-soft);
        padding: 12px 16px;
        display: flex;
        gap: 8px;
      }

      .btn {
        border: 1px solid var(--line-soft);
        border-radius: 10px;
        font-size: 12px;
        padding: 8px 12px;
        color: var(--text);
        background: rgba(124, 108, 240, 0.12);
        cursor: pointer;
      }

      .btn.primary {
        border-color: var(--accent);
        background: rgba(124, 108, 240, 0.28);
      }

      .collapsed-rail {
        position: absolute;
        left: 16px;
        bottom: 16px;
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
      }

      .chip {
        border: 1px solid var(--line-soft);
        border-radius: 999px;
        padding: 6px 10px;
        background: rgba(10, 10, 16, 0.86);
        color: var(--text-dim);
        font-size: 12px;
      }

      .notes {
        border: 1px solid var(--line-soft);
        border-radius: 12px;
        padding: 12px;
        background: rgba(10, 10, 16, 0.72);
        color: var(--text-dim);
        font-size: 12px;
      }

      .notes strong { color: var(--text); }

      @keyframes drift {
        from { transform: translateY(0); }
        to { transform: translateY(-14px); }
      }

      @media (max-width: 980px) {
        body { padding: 14px; }
        .panel-main { width: calc(100% - 24px); min-height: 560px; }
        .content-types { grid-template-columns: repeat(2, minmax(0, 1fr)); }
      }
    </style>
  </head>
  <body data-state="default" data-mode="review-first" data-content-type="text">
    <div class="atmosphere" aria-hidden="true"></div>

    <main class="shell">
      <section class="toolbar" aria-label="preview controls">
        <button type="button" data-set-state="default" aria-pressed="true">Default</button>
        <button type="button" data-set-state="loading" aria-pressed="false">Loading</button>
        <button type="button" data-set-state="empty" aria-pressed="false">Empty</button>
        <button type="button" data-set-state="error" aria-pressed="false">Error</button>
        <button type="button" data-set-state="auth-required" aria-pressed="false">Auth Required</button>
      </section>

      <section class="visor" aria-label="threshold panel spike">
        <div class="hud-bar">
          <span><strong>Threshold Panel Spike</strong> | map context</span>
          <span>main slot: centered-overlay</span>
        </div>

        <article class="panel-main">
          <header class="panel-header">
            <div class="panel-label">Threshold</div>
            <h1 class="panel-title">Introduce a new organism</h1>
            <p class="panel-subtitle">One organism, one initial state. For scaffolds, use templates.</p>
          </header>

          <div class="progress" aria-hidden="true">
            <span class="is-complete">Name</span>
            <span class="is-complete">Content Type</span>
            <span class="is-complete">Initial State</span>
            <span class="is-complete">Integration Mode</span>
          </div>

          <div class="state-wrap state-default">
            <div class="state-card">
              <h3>Ready</h3>
              <p>Everything needed to threshold is available.</p>
            </div>
          </div>
          <div class="state-wrap state-loading">
            <div class="state-card">
              <h3>Thresholding...</h3>
              <p>Creating identity and writing initial state.</p>
            </div>
          </div>
          <div class="state-wrap state-empty">
            <div class="state-card">
              <h3>Empty State</h3>
              <p>No content yet. Start with a name and content type.</p>
            </div>
          </div>
          <div class="state-wrap state-error">
            <div class="state-card">
              <h3>Could not threshold</h3>
              <p>Payload JSON is invalid. Fix syntax and try again.</p>
            </div>
          </div>
          <div class="state-wrap state-auth-required">
            <div class="state-card">
              <h3>Auth required</h3>
              <p>Sign in to threshold organisms and assume stewardship.</p>
            </div>
          </div>

          <div class="fields">
            <div class="field">
              <label for="name">Name</label>
              <input id="name" type="text" value="Moon Garden Session" />
            </div>

            <div class="field">
              <legend>Content type</legend>
              <div class="content-types" role="listbox" aria-label="select content type">
                <button class="type-pill" data-content-type="text" aria-pressed="true" type="button">
                  <strong>Text</strong>
                  Notes and writing
                </button>
                <button class="type-pill" data-content-type="audio" aria-pressed="false" type="button">
                  <strong>Audio</strong>
                  Songs and clips
                </button>
                <button class="type-pill" data-content-type="image" aria-pressed="false" type="button">
                  <strong>Image</strong>
                  Artwork and stills
                </button>
                <button class="type-pill" data-content-type="thread" aria-pressed="false" type="button">
                  <strong>Thread</strong>
                  Open conversation
                </button>
              </div>
            </div>

            <div class="field">
              <label for="payload">Initial state payload</label>
              <textarea id="payload">{ "content": "First capture from rehearsal", "format": "markdown" }</textarea>
            </div>

            <div class="field">
              <legend>Integration mode</legend>
              <div class="mode-options">
                <button type="button" class="mode-card selected" data-mode="review-first">
                  <h4>Review First</h4>
                  <p>Changes are offered as proposals before integration.</p>
                </button>
                <button type="button" class="mode-card" data-mode="open-trunk">
                  <h4>Instant Integrate (open-trunk)</h4>
                  <p>Authorized stewards can append state directly.</p>
                </button>
              </div>
            </div>
          </div>

          <section class="next">
            <p><strong>What happens next:</strong> <span id="nextText">After threshold, changes follow the proposal flow before integration.</span></p>
          </section>

          <section class="summary">
            <p>
              Thresholding as <strong id="summaryName">Moon Garden Session</strong> with <strong id="summaryType">Text</strong> in
              <strong id="summaryMode">Review First</strong> mode.
            </p>
          </section>

          <footer class="actions">
            <button class="btn primary" type="button">Threshold Organism</button>
            <button class="btn" type="button">Cancel</button>
          </footer>
        </article>

        <div class="collapsed-rail" aria-label="collapsed panel rail">
          <span class="chip">My organisms</span>
          <span class="chip">Templates</span>
          <span class="chip">Template values</span>
        </div>
      </section>

      <section class="notes">
        <strong>Spike intent:</strong> this concept keeps Threshold's true interaction contract while exploring cinematic hierarchy,
        clearer decision framing, and faster comprehension for non-technical users.
      </section>
    </main>

    <script>
      const stateButtons = Array.from(document.querySelectorAll("[data-set-state]"));
      const typeButtons = Array.from(document.querySelectorAll("[data-content-type]"));
      const modeButtons = Array.from(document.querySelectorAll(".mode-card"));

      const summaryType = document.getElementById("summaryType");
      const summaryMode = document.getElementById("summaryMode");
      const nextText = document.getElementById("nextText");

      function setState(nextState) {
        document.body.dataset.state = nextState;
        for (const button of stateButtons) {
          button.setAttribute("aria-pressed", String(button.dataset.setState === nextState));
        }
      }

      function setContentType(nextType, label) {
        document.body.dataset.contentType = nextType;
        for (const button of typeButtons) {
          button.setAttribute("aria-pressed", String(button.dataset.contentType === nextType));
        }
        if (summaryType) summaryType.textContent = label;
      }

      function setMode(nextMode, label) {
        document.body.dataset.mode = nextMode;
        for (const button of modeButtons) {
          button.classList.toggle("selected", button.dataset.mode === nextMode);
        }

        if (summaryMode) summaryMode.textContent = label;
        if (nextText) {
          nextText.textContent =
            nextMode === "open-trunk"
              ? "After threshold, authorized stewards can integrate changes directly."
              : "After threshold, changes follow the proposal flow before integration.";
        }
      }

      for (const button of stateButtons) {
        button.addEventListener("click", () => {
          const nextState = button.dataset.setState;
          if (nextState) setState(nextState);
        });
      }

      for (const button of typeButtons) {
        button.addEventListener("click", () => {
          const type = button.dataset.contentType;
          const strong = button.querySelector("strong");
          const label = strong ? strong.textContent : "Unknown";
          if (type && label) setContentType(type, label);
        });
      }

      for (const button of modeButtons) {
        button.addEventListener("click", () => {
          const mode = button.dataset.mode;
          const heading = button.querySelector("h4");
          const label = heading ? heading.textContent : "Unknown";
          if (mode && label) setMode(mode, label);
        });
      }
    </script>
  </body>
</html>
